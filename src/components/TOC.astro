---
const { headings } = Astro.props;

// Only show H2 + H3
const tocHeadings = headings.filter(h => h.depth === 2 || h.depth === 3);
---

{tocHeadings.length > 0 && (
  <nav aria-label="Table of contents" class="toc">
    <p><strong>Table of Contents</strong></p>
    <ul>
      {tocHeadings.map(h => (
        <li class={h.depth === 3 ? "toc-sub" : ""}>
          <a href={`#${h.slug}`}>{h.text}</a>
        </li>
      ))}
    </ul>
  </nav>
)}

<style>
.toc {
  border: 1px solid #e5e7eb;
  padding: 16px;
  margin: 24px 0;
  background: #fafafa;
}
.toc ul {
  list-style: none;
  padding-left: 0;
}
.toc li {
  margin: 6px 0;
}
.toc-sub {
  margin-left: 16px;
  font-size: 0.95em;
}
</style>
